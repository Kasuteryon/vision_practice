<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>IoT Data Mining Dashboard</title>
  <link rel="stylesheet" href="/static/styles.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
</head>

<body>
  <h1>IoT Monitoring with TimescaleDB & WebSocket</h1>
  <div class="grid">

    <!-- Real-Time WebSocket Graph -->
    <div class="box">
      <h3>Real-Time Data (MQTT via WebSocket)</h3>
      <canvas id="realtimeChart"></canvas>
    </div>

    <!-- History from DB Graph -->
    <div class="box">
      <h3>Historical Data (from TimescaleDB)</h3>
      <button onclick="loadHistoryChart()">Reload</button>
      <canvas id="historyChart"></canvas>
    </div>

    <!-- Cluster Scatter Plot -->
    <div class="box">
      <h3>Scatter Plot (Temperature vs Humidity by Cluster)</h3>
      <button onclick="runClustering()">Run K-Means (K=3)</button>
      <canvas id="scatterChart"></canvas>
    </div>

    <!-- Description -->
    <div class="box">
      <h3>Proyecto de Minería de Datos</h3>
      <div class="project-description">
        Este sistema integra sensores físicos (Arduino + DHT11), transmisión de datos por MQTT, procesamiento backend
        con Flask y almacenamiento histórico en TimescaleDB. Mediante clustering K-means se analiza el comportamiento
        de variables ambientales, demostrando un caso de minería de datos aplicado a IoT. 
      </div>
      <br>
      <div class="project-description">
        <strong>Autor:</strong> Eduardo Ignacio Castellón Castillo
      </div>
      <br>
       <div class="project-description">
        Maestría en Ingeniería y Diseño de Sistemas Sostenibles - UPIIH.
      </div>
    </div>

  </div>

  <script src="/static/dashboard.js"></script>
</body>

</html>